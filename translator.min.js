/*! translator.js 18-08-2013 */
!function(){"use strict";function a(a,b,c){if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d])}function b(a,b,d){return c(a)&&c(a[b])?a[b]:d}function c(a){return void 0!==a}var d=this,e={DOM:function(c){var d={};this.load=function(){var e=b(c,"class","translation");return a(document.getElementsByClassName(e),function(a){var b=a.getAttribute("data-translation-lang"),c=a.getAttribute("data-translation-id");d[b]=d[b]||{},d[b][c]=a.innerHTML}),d},this.save=function(a,b,c){d[a][b]=c},this.commit=function(){var e=b(c,"class","translation");a(document.getElementsByClassName(e),function(a){var b=a.getAttribute("data-translation-lang"),c=a.getAttribute("data-translation-id");a.innerHTML=d[b][c]})}},localStorage:function(){var a={};this.load=function(){a=JSON.parse(localStorage.getItem("translations"))},this.save=function(b,c,d){a[b][c]=d},this.commit=function(){localStorage.setItem("translations",JSON.stringify(a))}},get:function(a){var c=b(a,"loader","DOM");if(!this.hasOwnProperty(c))throw"Translation loader '"+c+"' is not valid.";return new this[c](a)}},f=function(c){function d(){var d=b(c,"class","translation");a(document.getElementsByClassName(d),function(a){var b=a.getAttribute("data-translation-lang"),c=a.getAttribute("data-translation-id");a.addEventListener("click",function(){g.translate(b,c)})})}var f=e.get(c),g=this;this.highlight=function(){var a;b(c,"class","translation"),a=document.createElement("style"),a.setAttribute("type","text/css"),a.id="translation-highlight-style",a.innerHTML=".translation { background: red; cursor: pointer; }",document.getElementsByTagName("head")[0].appendChild(a)},this.removeHighlight=function(){var a=document.getElementById("translation-highlight-style");a&&a.remove()},this.start=function(){var a=f.load();this.highlight(),d(),console.log("translations",a)},this.translate=function(a,b){var c=prompt("Please type in your new translation:");null!==c&&f.save(a,b,c)},this.stop=function(){f.commit(),this.removeHighlight()}};"undefined"!=typeof exports?module.exports=f:d.Translator=f}.call(this);